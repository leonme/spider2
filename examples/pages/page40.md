---
title: canvas刮刮乐和画笔
date: 2016-11-07 15:51:54
comments: true
categories: HTML5
---

#canvas刮刮乐和画笔
 &lt;div id="lottery" style="width:300px;height:500px;margin:10px;background-color:lightskyblue;border-radius:5px;float:left;"&gt;          &lt;div style="width:300px;height:100px;line-height:100px;text-align:center;font-size:33px;color:blueviolet;"&gt;NICK彩票&lt;/div&gt;          &lt;div id="txt" style="width:300px;height:200px;font-size:40px;color:peachpuff;display:flex;justify-content:center;align-items:center;flex-direction:column;"&gt;              &lt;span&gt;祝&lt;/span&gt;              &lt;span&gt;君&lt;/span&gt;              &lt;span&gt;中&lt;/span&gt;              &lt;span&gt;奖&lt;/span&gt;          &lt;/div&gt;          &lt;div id="canvasArea" style="width:300px;height:200px;position:relative;"&gt;              &lt;div style="width:300px;height:200px;position:absolute;top:0;left:0;z-index:1;text-align:center;line-height:200px;font-weight:bold;font-size:56px;color:indianred;"&gt;一等奖&lt;/div&gt;              &lt;canvas id="canvas" width="300px" height="200px" style="position:absolute;top:0;left:0;z-index:2;"&gt;&lt;/canvas&gt;          &lt;/div&gt;      &lt;/div&gt;  flex布局，将&lsquo;祝君中奖&rsquo;垂直居中，目前还有兼容问题，不过看我们大前端的发展趋势，应该很快就能搞定了； canvas和&lsquo;一等奖&rsquo;div的z-index问题，将canvas的z-index设置较高，使其置于一等奖div上面。  var canvas = document.getElementById("canvas"); var context = canvas.getContext("2d");          context.fillStyle='#A9AB9D';         context.fillRect(10,10,280,180);         context.fillStyle='#000';         context.font='50px Arial';         context.fillText('刮奖区',75,115);  填充颜色； 绘制实心矩形； 设置字体颜色； 设置字体大小类型； 绘制实心字体。          setInterval(function(){             document.getElementById('txt').style.color = document.getElementById('txt').style.color=='peachpuff' ? 'yellow' : 'peachpuff';         },500);          var brush=function(){//刮奖             context.clearRect(event.offsetX,event.offsetY,20,20);         };          canvas.onmousedown = function(){             // 鼠标按下时 - 绑定鼠标跟随事件             bindHandler(canvas,'mousemove',brush,false);         }         canvas.onmouseup = function(){             // 停止刮奖功能 - 解绑鼠标跟随事件             removeHandler(canvas,"mousemove",brush,false);         }       &lt;div style="width:300px;height:500px;margin:10px;border-radius:10px;overflow:hidden;float:right;"&gt;          &lt;canvas id="canvas2" width="300px" height="500px" style="background-color:lightblue;"&gt;&lt;/canvas&gt;      &lt;/div&gt;          var canvas2 = document.getElementById("canvas2");         var context2 = canvas2.getContext("2d");          var draw=function(){             context2.fillRect(event.offsetX,event.offsetY,10,10);         };          context2.font='20px Arial';         context2.strokeText('NICK画笔',100,30);//写个头         //1. 为canvas元素onmousedown和onmouseup事件         canvas2.onmousedown = function(){             // 启用画笔功能 - 绑定鼠标跟随事件             bindHandler(canvas2,'mousemove',draw,false);         }         canvas2.onmouseup = function(){             // 停止画笔功能 - 解绑鼠标跟随事件             removeHandler(canvas2,"mousemove",draw,false);         } ![picture](http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)
![picture](http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)
  &lt;!DOCTYPE html&gt; &lt;html&gt;  &lt;head&gt;   &lt;title&gt;Canvas lottery brush nick&lt;/title&gt;   &lt;meta charset="utf-8"/&gt;  &lt;/head&gt;  &lt;body&gt;  &lt;div style="width:640px;margin:auto;"&gt;      &lt;!--刮刮乐--&gt;      &lt;div id="lottery" style="width:300px;height:500px;margin:10px;background-color:lightskyblue;border-radius:5px;float:left;"&gt;          &lt;div style="width:300px;height:100px;line-height:100px;text-align:center;font-size:33px;color:blueviolet;"&gt;NICK彩票&lt;/div&gt;          &lt;div id="txt" style="width:300px;height:200px;font-size:40px;color:peachpuff;display:flex;justify-content:center;align-items:center;flex-direction:column;"&gt;              &lt;span&gt;祝&lt;/span&gt;              &lt;span&gt;君&lt;/span&gt;              &lt;span&gt;中&lt;/span&gt;              &lt;span&gt;奖&lt;/span&gt;          &lt;/div&gt;          &lt;div id="canvasArea" style="width:300px;height:200px;position:relative;"&gt;              &lt;div style="width:300px;height:200px;position:absolute;top:0;left:0;z-index:1;text-align:center;line-height:200px;font-weight:bold;font-size:56px;color:indianred;"&gt;一等奖&lt;/div&gt;              &lt;canvas id="canvas" width="300px" height="200px" style="position:absolute;top:0;left:0;z-index:2;"&gt;&lt;/canvas&gt;          &lt;/div&gt;      &lt;/div&gt;      &lt;!--画图工具画笔功能--&gt;      &lt;div style="width:300px;height:500px;margin:10px;border-radius:10px;overflow:hidden;float:right;"&gt;          &lt;canvas id="canvas2" width="300px" height="500px" style="background-color:lightblue;"&gt;&lt;/canvas&gt;      &lt;/div&gt;  &lt;/div&gt;  &lt;div style="text-align:center;"&gt;      &lt;p&gt;刮刮乐：鼠标按住不放，拖动开始刮奖！&lt;/p&gt;      &lt;p&gt;画笔：鼠标按住不放，拖动画画！&lt;/p&gt;  &lt;/div&gt;     &lt;script&gt;         //插件方法封装区          ;(function(){             // 事件绑定             window.bindHandler = (function() {                 if (window.addEventListener) {// 标准浏览器                     return function(elem, type, handler) {                         // elem:节点    type:事件类型   handler:事件处理函数                         // 最后一个参数为true:在捕获阶段调用事件处理程序;为false:在冒泡阶段调用事件处理程序。注意：ie没有这个参数                         elem.addEventListener(type, handler, false);                     }                 } else if (window.attachEvent) {// IE浏览器                     return function(elem, type, handler) {                         elem.attachEvent("on" + type, handler);                     }                 }             }());             // 事件解除             window.removeHandler = (function() {                 if (window.removeEventListener) {// 标准浏览器                     return function(elem, type, handler) {                         elem.removeEventListener(type, handler, false);                     }                 } else if (window.detachEvent) {// IE浏览器                     return function(elem, type, handler) {                         elem.detachEvent("on" + type, handler);                     }                 }             }());         }());         //命名区         var canvas = document.getElementById("canvas");         var context = canvas.getContext("2d");         var canvas2 = document.getElementById("canvas2");         var context2 = canvas2.getContext("2d");         var brush=function(){//刮奖             context.clearRect(event.offsetX,event.offsetY,20,20);         };         var draw=function(){//写字             context2.fillRect(event.offsetX,event.offsetY,10,10);         };         //功能实现区         //刮刮乐         // 1. 绘制刮奖区域         context.fillStyle='#A9AB9D';         context.fillRect(10,10,280,180);         context.fillStyle='#000';         context.font='50px Arial';         context.fillText('刮奖区',75,115);         //字体变色         setInterval(function(){             document.getElementById('txt').style.color = document.getElementById('txt').style.color=='peachpuff' ? 'yellow' : 'peachpuff';         },500);         //2. 为canvas元素onmousedown和onmouseup事件         canvas.onmousedown = function(){             // 鼠标按下时 - 绑定鼠标跟随事件             bindHandler(canvas,'mousemove',brush,false);         }         canvas.onmouseup = function(){             // 停止刮奖功能 - 解绑鼠标跟随事件             removeHandler(canvas,"mousemove",brush,false);         }         //画笔         context2.font='20px Arial';         context2.strokeText('NICK画笔',100,30);//写个头         //1. 为canvas元素onmousedown和onmouseup事件         canvas2.onmousedown = function(){             // 启用画笔功能 - 绑定鼠标跟随事件             bindHandler(canvas2,'mousemove',draw,false);         }         canvas2.onmouseup = function(){             // 停止画笔功能 - 解绑鼠标跟随事件             removeHandler(canvas2,"mousemove",draw,false);         }     &lt;/script&gt;  &lt;/body&gt; &lt;/html&gt;  View Code&nbsp;
